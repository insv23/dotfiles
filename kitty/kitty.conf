# BEGIN_KITTY_THEME
# Catppuccin-Mocha
include current-theme.conf
# END_KITTY_THEME

# kitty, shut up!
bell-mode off
enable_audio_bell no
visual_bell_duration 0
window_alert_on_bell no

editor vim

# ----- font -----
font_size 14
font_family         Maple Mono NF CN ExtraLight
bold_font           Maple Mono NF CN Bold
italic_font         Maple Mono NF CN Italic
bold_italic_font    Maple Mono NF CN Bold Italic
font_features       MapleMono-NF-CN-ExtraLight +cv01 +ss02 +ss04 +ss05 +zero
font_features       MapleMono-NF-CN-Bold +cv01 +ss02 +ss04 +ss05 +zero
font_features       MapleMono-NF-CN-Italic +cv01 +ss02 +ss04 +ss05 +zero
font_features       MapleMono-NF-CN-BoldItalic +cv01 +ss02 +ss04 +ss05 +zero


# ----- window -----
hide_window_decorations         titlebar-only
window_padding_width            15
background_opacity              0.8
background_blur                 30
remember_window_size            yes

# 窗口边框（突出当前 focus 的窗格）
window_border_width 2pt
inactive_text_alpha 0.5

# ----- layouts -----
# 文档: https://sw.kovidgoyal.net/kitty/layouts/
# cmd+r 循环切换 layout，ctrl+shift+[ 或 ] 切换窗口焦点
#
# 7 种布局说明:
#   Stack      - 当前窗口全屏，其他隐藏（配合 toggle_layout stack 实现临时全屏）
#   Tall       - 左侧大窗口占满高度，右侧窗口垂直堆叠
#   Fat        - 顶部大窗口占满宽度，底部窗口水平排列（Tall 的横版）
#   Grid       - 网格等分
#   Splits     - 自由分割，类似 tmux/vim 的任意分屏
#   Horizontal - 所有窗口左右并排
#   Vertical   - 所有窗口上下堆叠
enabled_layouts Splits, Stack, Horizontal
# 取消默认的 cmd enter 分屏
map cmd+enter
# 分屏：cmd+d 左右分，cmd+shift+d 上下分（Splits 布局下生效）
map cmd+d launch --location=vsplit --cwd=current
map cmd+shift+d launch --location=hsplit --cwd=current
# 取消默认的循环 layout
map ctrl+shift+l
map cmd+r next_layout
map shift+cmd+t new_tab_with_cwd
map cmd+w close_window_with_confirmation

# vim 风格切换窗口焦点 (cmd+hjkl)
map cmd+h neighboring_window left
map cmd+j neighboring_window bottom
map cmd+k neighboring_window top
map cmd+l neighboring_window right

# vim 风格调整窗格大小 (cmd+shift+hjkl)
map cmd+shift+h resize_window narrower
map cmd+shift+l resize_window wider
map cmd+shift+k resize_window taller
map cmd+shift+j resize_window shorter

# 当前窗格临时全屏 (类似 tmux prefix+z)
map cmd+z toggle_layout stack

# ----- tab bar -----
tab_bar_edge                top
tab_bar_style               powerline
tab_powerline_style         slanted

# 为每个 tab 绑定快捷键 cmd+1/2/3...
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9

# 在标签栏中显示标号和当前布局
tab_title_template "{index}: {layout_name} - {title}"

# tab title length, 0 means no limit
tab_title_max_length 30

# set tab title
# default shortcuts: ctrl+shift+alt+t
# map f1 set_tab_title

# 关闭当前标签页后，将切换到哪个选项卡
# previous : last used tab
# left : the left of the closed tab
# right : the right of the closed tab
# last : right-most tab
tab_switch_strategy last


# open link with cmd + left click
mouse_map cmd+left release grabbed,ungrabbed mouse_click_url

# 取消 kitty 默认 cmd n 创建新 os window 的快捷键，
# zellij 用 cmd n 创建新 pane
map cmd+n

# ---- hints ---
# https://sw.kovidgoyal.net/kitty/conf/#select-and-act-on-visible-text
## 插入选中词
map cmd+; kitten hints --alphabet asdfghjkl --type word --program -

## 插入选中行
map cmd+' kitten hints --alphabet asdfghjkl --type line --program -

# 运行超过5秒的命令完成后发送通知(not works in tmux/zellij)
# 统一使用BARK的通知  
# notify_on_cmd_finish always 5.0

# 关闭粘贴 URL 时自动加引号
paste_actions no-op

# 弹出 lazygit（overlay 覆盖当前窗口，退出后恢复）
map cmd+g launch --type=overlay --cwd=current --color=background=black --env XDG_CONFIG_HOME=/Users/tony/.config lazygit

# 弹出临时 shell，exit 后自动关闭
map cmd+f launch --type=overlay --cwd=current --color=background=black
