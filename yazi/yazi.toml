# https://yazi-rs.github.io/docs/configuration/yazi/
# https://github.com/sxyazi/yazi/blob/main/yazi-config/preset/yazi-default.toml

# Yazi 配置文件说明
# =================
#
# Yazi 界面布局（三列模式）：
# - 左列：父目录内容
# - 中列：当前目录内容（焦点所在）
# - 右列：预览区域（文件内容或子目录列表）
#
# 默认 opener 行为（edit vs open）：
# +-----------+-------------------------+---------------------------+
# | 类型      | edit (Enter)            | open (O 选择)             |
# +-----------+-------------------------+---------------------------+
# | 文本文件  | $EDITOR (vim)           | macOS open 命令           |
# | 图片文件  | 不适用                  | macOS open (预览.app)     |
# | 目录      | $EDITOR (vim 打开目录)  | macOS open (Finder)       |
# +-----------+-------------------------+---------------------------+
# - edit = 终端编辑器，阻塞式
# - open = 系统默认程序，非阻塞

[mgr]
ratio          = [ 0, 4, 6 ]  # 三列宽度比例：父目录:当前目录:预览
sort_by        = "natural"
linemode       = "size"

[plugin]
prepend_previewers = [
    { name = "*/", run = "eza-preview" },
]

prepend_fetchers = [
    { id = "git", name = "*", run = "git" },
    { id = "git", name = "*/", run = "git" },
]

[opener]
zed = [
    { run = 'zed "$@"', block = false, desc = "Zed", for = "macos" },
]

[open]
prepend_rules = [
    # 文本文件和代码文件 - 可用 Zed 打开（按 O 选择）
    { mime = "text/*", use = [ "edit", "zed", "open" ] },
    { name = "*.{js,ts,jsx,tsx,json,md,yml,yaml,toml,rs,go,py,lua,sh}", use = [ "edit", "zed", "open" ] },
]
